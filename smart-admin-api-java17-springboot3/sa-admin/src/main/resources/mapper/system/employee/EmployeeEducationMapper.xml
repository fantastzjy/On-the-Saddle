<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="net.lab1024.sa.admin.module.system.employee.dao.EmployeeEducationDao">

    <select id="selectByEmployeeId" resultType="net.lab1024.sa.admin.module.system.employee.domain.vo.EmployeeEducationVO">
        SELECT 
            education_id,
            employee_id,
            education_level,
            school_name,
            major,
            start_date,
            end_date,
            is_graduated,
            degree_certificate_url,
            sort_order,
            remark,
            create_time,
            update_time
        FROM t_employee_education
        WHERE employee_id = #{employeeId}
          AND deleted_flag = 0
        ORDER BY sort_order ASC, start_date DESC
    </select>

    <update id="deleteByEmployeeId">
        UPDATE t_employee_education 
        SET deleted_flag = 1, update_time = NOW()
        WHERE employee_id = #{employeeId}
          AND deleted_flag = 0
    </update>

</mapper>